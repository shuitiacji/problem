1. AGC001 E
题意：
有N个叉子，对应的叉子附带有两种各Ai个和Bi个的食材，每次选出两个叉子和对应的食材，将这两种食材按照某种顺序插到叉子上。其中，叉子之间都是不同的（不过叉子使用的顺序没有区别），而每种食材都是没有区别的（也就是说，所有是同一种类的食材都是一样的）。求能够有多少种不同的选取方案。

思路：
ans=∑∑((ai+aj+bi+bj)!/(ai+aj)!/(bi+bj)!);
->ans=∑∑C(ai+aj,ai+aj+bi+bj);
对于C(i,j)，它的几何意义是从原点到(i,j)的方案数(x坐标+1,与y坐标+1)
对于C(ai+aj,ai+aj+bi+bj)=(-ai,-bi)到(aj,bj)的方案数。
如果暴力n^2算效率很低，不如把这些抽象到点，一起跑一次dp
对于dp[-ai][-bi],置成1，然后一起dp，dp[i][j]=dp[i-1][j]+dp[i][j-1]，然后在dp[ai][bi]算一下贡献，减去(-ai,-bi)到它自己的。
因为有两次重复算，(-ai,-bi)到(aj,bj)与(-aj,-bj)到(ai,bi)，ans除以2

2. AGC005 B
题意：
a为1-n的排列
输出∑∑min(a[l],a[l+1],..,a[r]) (sigma分别枚举l,r)

思路：
一个个n^2搞肯定不行，我们发现一个值在多个序列中存在贡献，且只求答案，想办法反着搞。
我们发现一个数只有在经过它，且序列中没有比它小时产生一次贡献。
根据这两个约束构造，
首先是经过它：
显然是在这个数的左边枚举一个左端点，右边枚举一个右端点。
接下来根据没有比它小的数，找出这两个端点的取值范围：
显然就是找到在其左边第一个比它小的，与右边第一个比它大的，这两段范围乘一下就是满足的序列个数。这个可以用单调栈预处理。

思考：
关键是考虑到对每个点算贡献，这种题目多往反面想想

3. AGC005 C
题意：
给你一列数a，求构造出一棵树使每个点i与其最远点的距离等于a[i]，所有边的长度为1，问有没有可能构造出来

思路：
一个性质是每个点的最远点一定是直径的端点。
然后我们找出直径长度，要求能构造出这条直径（每种距离都有2个点，当然直径中心只需要1个(也有可能有两个(奇偶))）。
然后其余点都可以直接接在直径上，因此到最远点的距离不能少于直径长度的一半(分直径长度的奇偶讨论）。
满足就能构造。

4. AGC005 D
题意：
给出n和k，问有多少个长度为n的排列p使得对于任意的i，有|pi−i|≠k。 

思路：
反着来容斥。
那么我们要求的就是至少选x个位置不满足条件的方案。 
利用上题目中的条件|pi−i|≠k。
为挖掘这个性质，用图的方式形象的表示
考虑把值和位置之间的关系建成一个二分图。
假定左半的N个点依次代表值1~N，右半的N个点依次代表位置1~N。
那么，一条边(i,j)存在的意义是，位置j处的值是i。
可以发现所有不合法的情况均包含形如(i,i−k)或(i,i+k)的一条边。
此时二分图匹配数就为排列中至少不满足条件的位置数
注意到每个数和他相减绝对值为k的数只有不超过两个，也就是说n个点会形成很多条链，每个点只能和与它有边相连的点配对。 
因为每条链都是平行的，我们可以在每条链上dp出方案来(满足二分图匹配的情况下)，最后背包一下。
其实也可以一起dp，即把链串起来，但在链与链的连接处，因为链与链并未实际相连特殊处理一下。

具体方法：

令f[i][j][0/1]，描述当前在i号边，已经选择了j条匹配边，上一条边(i-1)是选了(1)还是没选(0)(因为相当于二分图匹配，看是不是匹配边)的方案数。
那么可以得到转移方程:
f[i+1][j][0]=f[i][j][0]+f[i][j][1]
f[i+1][j+1][1]=f[i][j][0](这一步在链与链并未实际连接处要省掉)

发现由于是按边顺序dp，要保证一条链中编号是相邻的

5. AGC006 C
题意：
数轴上有n只兔子，第i只兔子的坐标为xi。
有一种操作，这操作有很多子操作,第i个子操作是要让第ai只兔子等概率的跳到自己关于第ai+1或第ai-1只兔子的对称点。
进行K次这种操作，求每只兔子最后坐标的期望值。

思路：
每次操作Ax=1/2(2A(x−1)−ax)+1/2(2A(x+1)−ax)=A(x−1)+A(x+1)−Ax
发现这个操作是线性的，可以直接用期望值替换
如果是对这个东西维护差分序列：
原：a[x] a[x+1] a[x+2] 
    a[x] a[x+1]-a[x] a[x+2]-a[x+1]
变后：
	a[x] a[x-1]+a[x+1] a[x+2]
	a[x] a[x+2]-a[x+1] a[x+1]-a[x]
发现就是交换了一下位置
又是对一个操作重复执行多次，还是交换操作，必然状态出现循环
找到所有循环后，在每个循环上走k步，当然要%一下循环长度

思考：
对于这种相邻元素加加减减的，往差分上想想

6. AGC006 D
题意：
给一个n层的金字塔，给出底部的方块数字，其他未知，要求每一个方块都是其下方，下左方和下右方的中位数，输出顶层数字。

思路：
第二次看见这种套路了。
是求一个序列中满足条件的一个数，且如果只有两类数方便处理，想到二分答案转01串。
由上一题可知当两个相同的数挨在一起时，不仅可以一直上去，还能往左右扩展(因为只有01，手玩一下就能发现）。
所以选离中点最近的就行了。

