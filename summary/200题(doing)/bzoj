1. bzoj 2561
题意:
给定一个边带正权的连通无向图G=(V,E)，其中N=|V|，M=|E|，N个点从1到N依次编号，给定三个正整数u，v，和L (u≠v)，假设现在加入一条边权为L的边(u,v)，那么需要删掉最少多少条边，才能够使得这条边既可能出现在最小生成树上，也可能出现在最大生成树上？

思路:
以最小生成树为例。把所有小于L的边取出来，显然这些边不能连通u和v，否则将u和v连起来在环上去掉L显然更小。所以求一个最小割就行了。最大生成树同理，两者相加就是答案。

思考：
这个关于MST的性质要记得，好多题目要用到
当发现什么最小代价使得不联通的，考虑最小割

2. bzoj 2654
题意：
给你一个无向带权连通图，每条边是黑色或白色。让你求一棵最小权的恰好有need条白色边的生成树。
题目保证有解。

思路：
如果我们给所有白色边增加边权(减少也行)，那么所选的白色边一定越来越少（反之同理）。所以我们二分给白色边增加多少边权，跑kruskal，最后再将增加的边权减去即可。

但是你可能怀疑二分的正确性？即如果给白色边边权加上mid，则所选白色边>need，如果加上mid+1，则所选白色边<need。解决方法是，在排序的时候，我们将白色边放在相同长度的黑色边之前。这样，因为mid+1时白边<mid，所以一定有若干=mid的黑边。在mid时，我们多选的白边就可以被黑边替换掉。所以在最后统计答案的时候，只需要ans-=mid*need即可。
可以每次二分一个答案，搞一次sort，也可以一开始分别对黑边与白边排序，二分一个答案时将两个排序合并。

据说还可以将白边的权值变为-inf，跑一遍最小生成树，求出必须要选的黑边，同理求出必须要选的白边，将白边贪心加满Need个，再贪心去加黑边。

据说这种求在恰好条件下的最值，可以使用这种奇妙的二分

思考：
最优化问题，给一些条件加权，使得其被选的概率降低，来满足一些其他的条件

3. bzoj 3237

题意：
给你一个n点m边的无向图，给你k个边的集合（集合元素不超过c），求每个集合中的边在原图中去掉后，原图是否连通。

思路：
这种删边加边多组询问图连通性的题，可以套路分治+可撤销并查集做.
首先可以把删边变加边操作，同时发现如果对每次操作单独处理，非常吃亏，因为重复建边会浪费很多效率。
借鉴整体考虑＋离线的思想，把所有操作一起分治做，来减少重复并查集加边操作。
因为处理左半边时，要加上右半边的值，处理右半边又要减去右，加上左。
这里涉及到并查集的撤销操作，可以用栈把每次的边存进去，撤销就不断pop且在并查集中修改。
为维护形态，无法路径压缩，只能按秩合并保持log的复杂度。
O(kc*log(m)*log(k))

思考：
离线与整体考虑，是一种常用的优化方法

4. bzoj 3562
题意：
给定一个无向图，有删边、添边两种操作，还有询问当前图中连通块个数。

思路：
考虑离线做法，发现并不好搞，因为涉及到删边操作，那么加边操作的贡献是一段段的，我们并不能很方便的知道一个询问被几个加边操作贡献.
这种存在撤销操作的题目，我们可以用线段树分治离线解决．
考虑一个加边操作的贡献是区间性的，我们为什么不用擅长区间修改的线段树解决．
考虑建一个时间线段树，每个叶子节点表示一个时刻．我们求出每一条边在整个过程中出现的连续时间段。将这些边加入线段树中。每一条边至多在线段树的log个区间中出现。
再dfs向所有存在询问的叶子节点，像标记永久化一样把路上的所有边加入可撤销并查集，离开节点时，在并查集中撤销这个节点的所有边．

5. bzoj 3622
题意：零食魔女夏洛特的结界里有糖果a和药片b各n个，两两配对，a>b的配对比b>a的配对多k个学姐就可能获胜，求方案数

思路：
多k个不好处理，考虑到a!=b，所以不是a>b就是b>a，问题转化成求恰好(n + k) / 2个的方案。
考虑容斥
设dp[i][j]表示为 a 中前 i 个数能选出比 b 大共有 j 对的方案数.
直接dp不好搞，更改dp顺序，显然要对a与b先排个序
设t[i]表示ai比多少个bj要大
dp[i][j] = dp[i - 1][j] + max(0, t[i] - j + 1) * dp[i - 1][j - 1];

ans = sigma( (-1) ^ (i - k) * C(i, k) * fac[n - i] * dp[n][i] ) ( i >= k)

6. bzoj 3653
题意：
题目大意：给一棵树，每次询问给定a,k，求三元组（a,b,c）的数量满足：
1.a和b都是c的祖先
2.a和b在树上距离不超过k
3.a,b,c互不相同

思路：
这个三元组肯定是个链，分两种情况讨论：
1.a是深度中间那个点，这种情况很好搞，此时可能的b只能有min(dep[a] - 1, k)个，c只有sz[a] - 1个
2.a是深度最高那个点，这种情况下，可能的b是dep[a] < dep[b] <= dep[a] + k，c个数为sz[b] - 1
发现b满足dfs序在a的子树中，且b的深度满足一定范围，把sz[b] - 1作为权值，二维数点即可。

7. bzoj 3714

题意：
魔术师的桌子上有n个杯子排成一行，编号为1,2,…,n，其中某些杯子底下藏有一个小球，如果你准确地猜出是哪些杯子，你就可以获得奖品。花费c_ij元，魔术师就会告诉你杯子i,i+1,…,j底下藏有球的总数的奇偶性。
采取最优的询问策略，你至少需要花费多少元，才能保证猜出哪些杯子底下藏着球？

思路：
观察性质
要求出i是否有球，必须要知道[1,i]和[1,(i−1)]的奇偶性
而对于知道[1,l-1],[l,r]，就能推出[1,r]
把询问看成连[l-1,r]的边，求最后联通的最小花费
最小生成树

思考：
一开始想的是要求出i是否有球，必须要知道[j, i]和[j, i - 1]的奇偶性
应确定一个统一的标准使得问题简化，比如说令j都为１


